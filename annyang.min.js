// annyang
// version : 0.0.1
// author : Tal Ater
// license : GNU v2
// TalAter.com
(function(){"use strict";var e,t=this;if(!("webkitSpeechRecognition"in t)){t.annyang=null;return null}var n=/\((.*?)\)/g,r=/(\(\?)?:\w+/g,i=/\*\w+/g,s=/[\-{}\[\]+?.,\\\^$|#\s]/g,o=function(e){e=e.replace(s,"\\$&").replace(n,"(?:$1)?").replace(r,function(e,t){return t?e:"([^\\s]+)"}).replace(i,"(.*?)");return new RegExp("^"+e+"$","i")},u=new webkitSpeechRecognition;u.maxAlternatives=5;u.continuous=!0;u.lang="en";u.onstart=function(){};u.onerror=function(){};u.onend=function(){};u.onresult=function(t){var n=t.results[t.resultIndex],r;for(var i=0;i<n.length;i++){r=n[i].transcript.trim();window.console.log("recognized: "+r);for(var s in e){var o=e[s].command.exec(r);if(o){e[s].callback.apply(this,o.slice(1));return!0}}}return!1};t.annyang={init:function(n){e=[];var r,i;for(var s in n){r=t[n[s]]||n[s];if(typeof r!="function")continue;i=o(s);e.push({command:i,callback:r})}},start:function(){u.start()}}}).call(this);