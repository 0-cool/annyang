// annyang
// version : 0.0.1
// author : Tal Ater
// license : GNU v2
// TalAter.com
(function(){"use strict";var e,t=this,n=!1,r="font-weight: bold; color: #00f;";if(!("webkitSpeechRecognition"in t)){t.annyang=null;return null}var i=/\((.*?)\)/g,s=/(\(\?)?:\w+/g,o=/\*\w+/g,u=/[\-{}\[\]+?.,\\\^$|#\s]/g,a=function(e){e=e.replace(u,"\\$&").replace(i,"(?:$1)?").replace(s,function(e,t){return t?e:"([^\\s]+)"}).replace(o,"(.*?)");return new RegExp("^"+e+"$","i")},f=new webkitSpeechRecognition;f.maxAlternatives=5;f.continuous=!0;f.lang="en";f.onstart=function(){};f.onerror=function(){};f.onend=function(){};f.onresult=function(i){var s=i.results[i.resultIndex],o;for(var u=0;u<s.length;u++){o=s[u].transcript.trim();n&&t.console.log("Speech recognized: %c"+o,r);for(var a in e){var f=e[a].command.exec(o);if(f){var l=f.slice(1);if(n){t.console.log("command matched: %c"+e[a].originalPhrase,r);l.length&&t.console.log("with parameters",l)}e[a].callback.apply(this,l);return!0}}}return!1};t.annyang={init:function(i){e=[];var s,o;for(var u in i){s=t[i[u]]||i[u];if(typeof s!="function")continue;o=a(u);e.push({command:o,callback:s,originalPhrase:u})}n&&t.console.log("Commands successfully loaded: %c"+e.length,r)},start:function(){f.start()},debug:function(e){arguments.length>0?n=!!e:n=!0}}}).call(this);